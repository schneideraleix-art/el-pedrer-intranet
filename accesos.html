<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Control de Accesos - El Pedrer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --sidebar-bg: #1a1d2b; --accent-red: #ff4d4d; --bg-light: #f4f7f9; --safe-green: #2ecc71; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; background-color: var(--bg-light); height: 100vh; }
        
        .sidebar { width: 240px; background-color: var(--sidebar-bg); color: white; padding: 20px; flex-shrink: 0; }
        .logo { font-size: 1.5rem; font-weight: bold; margin-bottom: 40px; }
        .nav-item { padding: 12px; margin-bottom: 5px; border-radius: 8px; display: flex; align-items: center; gap: 10px; cursor: pointer; color: #aeb2b9; text-decoration: none; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: white; }
        .nav-item.active { background: var(--accent-red); color: white; }

        .main-content { flex-grow: 1; padding: 30px; overflow-y: auto; }
        
        .access-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .door-card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); display: flex; align-items: center; justify-content: space-between; }
        
        .door-info { display: flex; align-items: center; gap: 15px; }
        .door-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        
        .status-locked { background: #fee2e2; color: #ef4444; }
        .status-unlocked { background: #dcfce7; color: #22c55e; }

        .switch { position: relative; display: inline-block; width: 60px; height: 30px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--safe-green); }
        input:checked + .slider:before { transform: translateX(30px); }

        .log-section { margin-top: 30px; background: white; padding: 20px; border-radius: 15px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th { text-align: left; color: #888; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        td { padding: 12px 0; border-bottom: 1px solid #f9f9f9; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">üèõÔ∏è EL PEDRER</div>
        <a href="direccion.html" class="nav-item"><i class="fas fa-th-large"></i> Dashboard</a>
        <a href="horarios.html" class="nav-item"><i class="fas fa-clock"></i> Horarios</a>
        <a href="accesos.html" class="nav-item active"><i class="fas fa-door-open"></i> Accesos</a>
        <a href="mensajeria.html" class="nav-item"><i class="fas fa-comment-dots"></i> Mensajer√≠a</a>
    </div>

    <div class="main-content">
        <h1>Sistema de Control de Accesos</h1>
        
        <div class="access-grid">
            <div class="door-card">
                <div class="door-info">
                    <div class="door-icon status-locked" id="icon-p1"><i class="fas fa-door-closed"></i></div>
                    <div>
                        <strong>Puerta Principal</strong><br>
                        <small id="txt-p1">Bloqueada</small>
                    </div>
                </div>
                <label class="switch">
                    <input type="checkbox" onchange="toggleDoor('p1')">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="door-card">
                <div class="door-info">
                    <div class="door-icon status-locked" id="icon-p2"><i class="fas fa-door-closed"></i></div>
                    <div>
                        <strong>Gimnasio</strong><br>
                        <small id="txt-p2">Bloqueada</small>
                    </div>
                </div>
                <label class="switch">
                    <input type="checkbox" onchange="toggleDoor('p2')">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="door-card">
                <div class="door-info">
                    <div class="door-icon status-unlocked" id="icon-p3"><i class="fas fa-door-open"></i></div>
                    <div>
                        <strong>Laboratorio B1</strong><br>
                        <small id="txt-p3">Abierta</small>
                    </div>
                </div>
                <label class="switch">
                    <input type="checkbox" checked onchange="toggleDoor('p3')">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <div class="log-section">
            <h3>Registro de Entradas Recientes</h3>
            <table>
                <thead>
                    <tr><th>Usuario</th><th>Punto de Acceso</th><th>Hora</th><th>Estado</th></tr>
                </thead>
                <tbody id="logTable">
                    <tr><td>Garc√≠a, Alberto</td><td>Puerta Principal</td><td>08:02:15</td><td><span style="color:green">‚úî √âxito</span></td></tr>
                    <tr><td>Limpieza (Turno Ma√±ana)</td><td>Conserjer√≠a</td><td>07:45:00</td><td><span style="color:green">‚úî √âxito</span></td></tr>
                    <tr><td>Desconocido</td><td>Laboratorio B1</td><td>21:10:05</td><td><span style="color:red">‚úò Denegado</span></td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function toggleDoor(id) {
            const icon = document.getElementById('icon-' + id);
            const txt = document.getElementById('txt-' + id);
            const isLocked = icon.classList.contains('status-locked');

            if(isLocked) {
                icon.classList.replace('status-locked', 'status-unlocked');
                icon.innerHTML = '<i class="fas fa-door-open"></i>';
                txt.innerText = 'Abierta';
                addLog('Sistema', 'Puerta ' + id, 'Apertura Remota');
            } else {
                icon.classList.replace('status-unlocked', 'status-locked');
                icon.innerHTML = '<i class="fas fa-door-closed"></i>';
                txt.innerText = 'Bloqueada';
            }
        }

        function addLog(user, point, status) {
            const table = document.getElementById('logTable');
            const row = table.insertRow(0);
            row.innerHTML = `<td>${user}</td><td>${point}</td><td>${new Date().toLocaleTimeString()}</td><td><span style="color:blue">‚Ñπ ${status}</span></td>`;
        }
    </script>
</body>
</html>
