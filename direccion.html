<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control Directivo - El Pedrer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --admin-red: #e63946; --sidebar-dark: #1a1a1a; --bg-light: #f8f9fa; }
        body { background-color: var(--bg-light); font-family: 'Segoe UI', sans-serif; display: flex; }

        /* Sidebar similar a tu captura */
        .sidebar { width: 220px; background: var(--sidebar-dark); min-height: 100vh; color: white; padding-top: 20px; position: fixed; }
        .sidebar-link { padding: 15px 25px; display: flex; align-items: center; color: rgba(255,255,255,0.7); text-decoration: none; transition: 0.3s; }
        .sidebar-link:hover, .sidebar-link.active { background: var(--admin-red); color: white; }
        
        .main-content { margin-left: 220px; width: 100%; padding: 30px; }
        
        /* Tarjetas de Indicadores (Top) */
        .stat-card { background: white; border-radius: 12px; padding: 20px; border-left: 5px solid; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .card-matricula { border-left-color: #e63946; }
        .card-absentismo { border-left-color: #ffb703; }
        .card-comedor { border-left-color: #219ebc; }
        .card-caja { border-left-color: #023047; }

        /* Botones de Operaciones */
        .op-button { background: white; border-radius: 12px; padding: 25px; text-align: left; border: 1px solid #eee; transition: 0.3s; height: 100%; width: 100%; }
        .op-button:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); border-color: var(--admin-red); }
        .op-icon { font-size: 1.5rem; margin-bottom: 15px; display: block; }

        /* MODAL DE LLAMADA VOIP */
        #voipPanel { 
            display: none; position: fixed; bottom: 30px; right: 30px; 
            width: 300px; background: #2d3436; color: white; border-radius: 20px; 
            padding: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.4); z-index: 9999;
            text-align: center; border: 1px solid rgba(255,255,255,0.1);
        }
        .pulse-ring { animation: pulse 1.5s infinite; border-radius: 50%; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(230, 57, 70, 0.4); } 70% { box-shadow: 0 0 0 15px rgba(230, 57, 70, 0); } 100% { box-shadow: 0 0 0 0 rgba(230, 57, 70, 0); } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="text-center mb-4">
        <img src="https://via.placeholder.com/60" class="rounded-circle border border-2 border-danger mb-2" alt="Admin">
        <p class="small fw-bold mb-0">Admin Direcci√≥n</p>
    </div>
    <a href="#" class="sidebar-link active"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
    <a href="personal_docente.html" class="sidebar-link"><i class="bi bi-people me-2"></i> Claustro</a>
    <a href="#" class="sidebar-link"><i class="bi bi-exclamation-triangle me-2 text-warning"></i> EMERGENCIA</a>
    <div class="mt-5 p-3">
        <button class="btn btn-sm btn-outline-light w-100" onclick="abrirMarcador()">üìû Marcador Manual</button>
    </div>
</div>

<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold">Panel de Control Directivo</h3>
        <span class="badge bg-danger">NUEVA ALERTA</span>
    </div>

    <div class="row g-3 mb-5">
        <div class="col-md-3">
            <div class="stat-card card-matricula">
                <small class="text-muted fw-bold">MATR√çCULA</small>
                <h2 class="fw-bold">842</h2>
                <small class="text-success"><i class="bi bi-arrow-up"></i> 2.4%</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card-absentismo">
                <small class="text-muted fw-bold">ABSENTISMO</small>
                <h2 class="fw-bold">12</h2>
                <small class="text-danger">Hoy</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card-comedor">
                <small class="text-muted fw-bold">COMEDOR</small>
                <h2 class="fw-bold">315</h2>
                <small>Men√∫s servidos</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="stat-card card-caja">
                <small class="text-muted fw-bold">CAJA CENTRO</small>
                <h2 class="fw-bold">1.250‚Ç¨</h2>
                <small>Saldo actual</small>
            </div>
        </div>
    </div>

    <h6 class="text-muted fw-bold mb-3 text-uppercase small">Gesti√≥n y Operaciones</h6>
    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <button class="op-button" onclick="window.location.href='contabilidad.html'">
                <i class="bi bi-calculator op-icon text-primary"></i>
                <span class="fw-bold">Contabilidad</span>
            </button>
        </div>
        <div class="col-md-3">
            <button class="op-button" onclick="lanzarLlamadaUrgente('Familia Garc√≠a - Comedor')">
                <i class="bi bi-telephone-outbound op-icon text-success"></i>
                <span class="fw-bold">Llamada R√°pida</span>
            </button>
        </div>
        <div class="col-md-3">
            <button class="op-button" onclick="window.location.href='gestion_bajas.html'">
                <i class="bi bi-person-badge op-icon text-info"></i>
                <span class="fw-bold">Control Bajas</span>
            </button>
        </div>
        <div class="col-md-3">
            <button class="op-button">
                <i class="bi bi-bell op-icon text-danger"></i>
                <span class="fw-bold">Timbre Manual</span>
            </button>
        </div>
    </div>
</div>

<div id="voipPanel">
    <div class="pulse-ring mb-3">
        <i class="bi bi-person-circle display-4"></i>
    </div>
    <h6 id="contactoNombre" class="fw-bold">Llamando a Familia...</h6>
    <p class="small text-success mb-3" id="tiempoLlamada">Conectando VoIP...</p>
    
    <div class="d-flex justify-content-center gap-2 mb-3">
        <button class="btn btn-sm btn-outline-light"><i class="bi bi-mic-mute"></i></button>
        <button class="btn btn-sm btn-outline-light"><i class="bi bi-record-circle text-danger"></i></button>
    </div>
    
    <button class="btn btn-danger w-100 rounded-pill fw-bold" onclick="colgar()">COLGAR</button>
</div>

<script>
    let timer;
    function lanzarLlamadaUrgente(nombre) {
        document.getElementById('contactoNombre').innerText = nombre;
        document.getElementById('voipPanel').style.display = 'block';
        let seg = 0;
        timer = setInterval(() => {
            seg++;
            let m = Math.floor(seg/60);
            let s = seg%60;
            document.getElementById('tiempoLlamada').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
        }, 1000);
    }

    function colgar() {
        clearInterval(timer);
        document.getElementById('voipPanel').style.display = 'none';
        alert("Llamada finalizada y registrada en el historial del centro.");
    }
    
    function abrirMarcador() {
        let num = prompt("Introduce el n√∫mero de tel√©fono:");
        if(num) lanzarLlamadaUrgente("Marcaci√≥n: " + num);
    }
</script>

</body>
</html>
