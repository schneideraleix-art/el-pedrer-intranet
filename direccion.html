<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Directivo - El Pedrer (Gratis)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root { --admin-red: #e63946; --sidebar-dark: #1a1a1a; }
        body { background-color: #f8f9fa; font-family: 'Segoe UI', sans-serif; display: flex; margin: 0; }
        
        /* Sidebar recuperado */
        .sidebar { width: 260px; background: var(--sidebar-dark); color: white; position: fixed; height: 100vh; padding: 25px; }
        .nav-link { color: rgba(255,255,255,0.7); padding: 12px; border-radius: 12px; display: block; text-decoration: none; margin-bottom: 5px; }
        .nav-link.active { background: var(--admin-red); color: white; }
        
        .main-content { margin-left: 260px; width: calc(100% - 260px); padding: 40px; }

        /* Estilo Centralita Gratis */
        #voipModal { 
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); 
            z-index: 9999; backdrop-filter: blur(10px); align-items: center; justify-content: center; 
        }
        .phone-card { background: white; width: 400px; border-radius: 30px; padding: 30px; text-align: center; }
        
        .bot-anim { width: 80px; height: 80px; background: #007bff; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 2rem; position: relative; }
        .bot-anim::after { content: ""; position: absolute; inset: 0; border: 4px solid #007bff; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.6); opacity: 0; } }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="text-center mb-5">
        <h5 class="fw-bold">ADMIN DIRECCIÃ“N</h5>
        <small class="text-muted">Centro El Pedrer</small>
    </div>
    <nav>
        <a href="#" class="nav-link active"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
        <a href="personal_docente.html" class="nav-link"><i class="bi bi-people me-2"></i> Claustro</a>
        <button class="btn btn-outline-light w-100 rounded-pill mt-4" onclick="mostrarMarcador()">
            <i class="bi bi-telephone"></i> Marcador Manual
        </button>
    </nav>
</div>

<div class="main-content">
    <h2 class="fw-bold mb-4">Panel de Control</h2>
    
    <div class="row g-4">
        <div class="col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center">
                <i class="bi bi-bell-fill text-warning fs-1 mb-2"></i>
                <h6 class="fw-bold">Timbre Manual</h6>
                <button class="btn btn-sm btn-light" onclick="tocarTimbre()">Activar</button>
            </div>
        </div>
        <div class="col-md-3">
            <div class="p-4 bg-white rounded-4 shadow-sm text-center">
                <i class="bi bi-telephone-outbound-fill text-success fs-1 mb-2"></i>
                <h6 class="fw-bold">Llamada Web</h6>
                <button class="btn btn-sm btn-light" onclick="llamar(674020247)">Llamar al Centro</button>
            </div>
        </div>
    </div>
</div>

<div id="voipModal">
    <div class="phone-card">
        <div id="ivrIcon" class="bot-anim"><i class="bi bi-robot"></i></div>
        <h4 class="fw-bold mb-1" id="phoneDisplay">674 02 02 47</h4>
        <p class="text-muted" id="ivrStatus">Iniciando asistente gratuito...</p>
        
        <div id="btnContainer" class="mt-4">
            <a id="linkLlamada" href="tel:674020247" class="btn btn-success btn-lg w-100 rounded-pill py-3 fw-bold mb-2">
                CONECTAR VOZ
            </a>
            <button class="btn btn-light w-100 rounded-pill" onclick="cerrarVoip()">CANCELAR</button>
        </div>
    </div>
</div>

<script>
    function mostrarMarcador() {
        document.getElementById('voipModal').style.display = 'flex';
        iniciarBot();
    }

    function iniciarBot() {
        const status = document.getElementById('ivrStatus');
        setTimeout(() => { 
            status.innerText = '"Hola, soy el asistente de El Pedrer. Espere..."';
            // Sonido de bienvenida (gratis)
            const msg = new SpeechSynthesisUtterance("Bienvenido al centro educativo El Pedrer. Conectando su llamada.");
            window.speechSynthesis.speak(msg);
        }, 1000);
        
        setTimeout(() => { 
            status.innerText = '"Derivando llamada al responsable..."';
            status.style.color = "#22c55e";
        }, 3000);
    }

    function llamar(num) {
        document.getElementById('phoneDisplay').innerText = num;
        document.getElementById('linkLlamada').href = "tel:" + num;
        mostrarMarcador();
    }

    function cerrarVoip() {
        document.getElementById('voipModal').style.display = 'none';
        window.speechSynthesis.cancel();
    }

    function tocarTimbre() {
        let audio = new Audio('https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3');
        audio.play();
    }
</script>

</body>
</html>
